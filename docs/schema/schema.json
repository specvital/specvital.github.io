{
  "name": "postgres",
  "tables": [
    {
      "name": "atlas_schema_revisions.atlas_schema_revisions",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "version",
          "type": "varchar",
          "nullable": false
        },
        {
          "name": "description",
          "type": "varchar",
          "nullable": false
        },
        {
          "name": "type",
          "type": "bigint",
          "nullable": false,
          "default": "2"
        },
        {
          "name": "applied",
          "type": "bigint",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "total",
          "type": "bigint",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "executed_at",
          "type": "timestamp with time zone",
          "nullable": false
        },
        {
          "name": "execution_time",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "error",
          "type": "text",
          "nullable": true
        },
        {
          "name": "error_stmt",
          "type": "text",
          "nullable": true
        },
        {
          "name": "hash",
          "type": "varchar",
          "nullable": false
        },
        {
          "name": "partial_hashes",
          "type": "jsonb",
          "nullable": true
        },
        {
          "name": "operator_version",
          "type": "varchar",
          "nullable": false
        }
      ],
      "indexes": [
        {
          "name": "atlas_schema_revisions_pkey",
          "def": "CREATE UNIQUE INDEX atlas_schema_revisions_pkey ON atlas_schema_revisions.atlas_schema_revisions USING btree (version)",
          "table": "atlas_schema_revisions.atlas_schema_revisions",
          "columns": ["version"]
        }
      ],
      "constraints": [
        {
          "name": "atlas_schema_revisions_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (version)",
          "table": "atlas_schema_revisions.atlas_schema_revisions",
          "referenced_table": "",
          "columns": ["version"]
        }
      ]
    },
    {
      "name": "public.codebases",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "host",
          "type": "varchar(255)",
          "nullable": false,
          "default": "'github.com'::character varying"
        },
        {
          "name": "owner",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "default_branch",
          "type": "varchar(100)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "last_viewed_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "external_repo_id",
          "type": "varchar(64)",
          "nullable": false
        },
        {
          "name": "is_stale",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        },
        {
          "name": "is_private",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        }
      ],
      "indexes": [
        {
          "name": "codebases_pkey",
          "def": "CREATE UNIQUE INDEX codebases_pkey ON public.codebases USING btree (id)",
          "table": "public.codebases",
          "columns": ["id"]
        },
        {
          "name": "idx_codebases_owner_name",
          "def": "CREATE INDEX idx_codebases_owner_name ON public.codebases USING btree (owner, name)",
          "table": "public.codebases",
          "columns": ["owner", "name"]
        },
        {
          "name": "idx_codebases_last_viewed",
          "def": "CREATE INDEX idx_codebases_last_viewed ON public.codebases USING btree (last_viewed_at) WHERE (last_viewed_at IS NOT NULL)",
          "table": "public.codebases",
          "columns": ["last_viewed_at"]
        },
        {
          "name": "idx_codebases_external_repo_id",
          "def": "CREATE UNIQUE INDEX idx_codebases_external_repo_id ON public.codebases USING btree (host, external_repo_id)",
          "table": "public.codebases",
          "columns": ["host", "external_repo_id"]
        },
        {
          "name": "idx_codebases_identity",
          "def": "CREATE UNIQUE INDEX idx_codebases_identity ON public.codebases USING btree (host, owner, name) WHERE (is_stale = false)",
          "table": "public.codebases",
          "columns": ["host", "owner", "name"]
        },
        {
          "name": "idx_codebases_public",
          "def": "CREATE INDEX idx_codebases_public ON public.codebases USING btree (is_private) WHERE (is_private = false)",
          "table": "public.codebases",
          "columns": ["is_private"]
        }
      ],
      "constraints": [
        {
          "name": "codebases_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.codebases",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.analyses",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "codebase_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "commit_sha",
          "type": "varchar(40)",
          "nullable": false
        },
        {
          "name": "branch_name",
          "type": "varchar(255)",
          "nullable": true
        },
        {
          "name": "status",
          "type": "analysis_status",
          "nullable": false,
          "default": "'pending'::analysis_status"
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true
        },
        {
          "name": "started_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "total_suites",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "total_tests",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "committed_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "parser_version",
          "type": "varchar(100)",
          "nullable": false,
          "default": "'legacy'::character varying"
        }
      ],
      "indexes": [
        {
          "name": "analyses_pkey",
          "def": "CREATE UNIQUE INDEX analyses_pkey ON public.analyses USING btree (id)",
          "table": "public.analyses",
          "columns": ["id"]
        },
        {
          "name": "idx_analyses_codebase_status",
          "def": "CREATE INDEX idx_analyses_codebase_status ON public.analyses USING btree (codebase_id, status)",
          "table": "public.analyses",
          "columns": ["codebase_id", "status"]
        },
        {
          "name": "idx_analyses_created",
          "def": "CREATE INDEX idx_analyses_created ON public.analyses USING btree (codebase_id, created_at)",
          "table": "public.analyses",
          "columns": ["codebase_id", "created_at"]
        },
        {
          "name": "uq_analyses_completed_commit_version",
          "def": "CREATE UNIQUE INDEX uq_analyses_completed_commit_version ON public.analyses USING btree (codebase_id, commit_sha, parser_version) WHERE (status = 'completed'::analysis_status)",
          "table": "public.analyses",
          "columns": ["codebase_id", "commit_sha", "parser_version"]
        }
      ],
      "constraints": [
        {
          "name": "fk_analyses_codebase",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (codebase_id) REFERENCES codebases(id) ON DELETE CASCADE",
          "table": "public.analyses",
          "referenced_table": "codebases",
          "columns": ["codebase_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "analyses_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.analyses",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.test_suites",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "parent_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "name",
          "type": "varchar(500)",
          "nullable": false
        },
        {
          "name": "line_number",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "depth",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "file_id",
          "type": "uuid",
          "nullable": false
        }
      ],
      "indexes": [
        {
          "name": "test_suites_pkey",
          "def": "CREATE UNIQUE INDEX test_suites_pkey ON public.test_suites USING btree (id)",
          "table": "public.test_suites",
          "columns": ["id"]
        },
        {
          "name": "idx_test_suites_parent",
          "def": "CREATE INDEX idx_test_suites_parent ON public.test_suites USING btree (parent_id) WHERE (parent_id IS NOT NULL)",
          "table": "public.test_suites",
          "columns": ["parent_id"]
        },
        {
          "name": "idx_test_suites_file",
          "def": "CREATE INDEX idx_test_suites_file ON public.test_suites USING btree (file_id)",
          "table": "public.test_suites",
          "columns": ["file_id"]
        }
      ],
      "constraints": [
        {
          "name": "chk_no_self_reference",
          "type": "CHECK",
          "def": "CHECK ((id \u003c\u003e parent_id))",
          "table": "public.test_suites",
          "referenced_table": "",
          "columns": ["id", "parent_id"]
        },
        {
          "name": "fk_test_suites_parent",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (parent_id) REFERENCES test_suites(id) ON DELETE CASCADE",
          "table": "public.test_suites",
          "referenced_table": "test_suites",
          "columns": ["parent_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "test_suites_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.test_suites",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "fk_test_suites_file",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (file_id) REFERENCES test_files(id) ON DELETE CASCADE",
          "table": "public.test_suites",
          "referenced_table": "test_files",
          "columns": ["file_id"],
          "referenced_columns": ["id"]
        }
      ]
    },
    {
      "name": "public.test_cases",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "suite_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(2000)",
          "nullable": false
        },
        {
          "name": "line_number",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "status",
          "type": "test_status",
          "nullable": false,
          "default": "'active'::test_status"
        },
        {
          "name": "tags",
          "type": "jsonb",
          "nullable": false,
          "default": "'[]'::jsonb"
        },
        {
          "name": "modifier",
          "type": "varchar(50)",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "test_cases_pkey",
          "def": "CREATE UNIQUE INDEX test_cases_pkey ON public.test_cases USING btree (id)",
          "table": "public.test_cases",
          "columns": ["id"]
        },
        {
          "name": "idx_test_cases_status",
          "def": "CREATE INDEX idx_test_cases_status ON public.test_cases USING btree (suite_id, status)",
          "table": "public.test_cases",
          "columns": ["suite_id", "status"]
        },
        {
          "name": "idx_test_cases_suite",
          "def": "CREATE INDEX idx_test_cases_suite ON public.test_cases USING btree (suite_id)",
          "table": "public.test_cases",
          "columns": ["suite_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_test_cases_suite",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (suite_id) REFERENCES test_suites(id) ON DELETE CASCADE",
          "table": "public.test_cases",
          "referenced_table": "test_suites",
          "columns": ["suite_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "test_cases_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.test_cases",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.users",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "email",
          "type": "varchar(255)",
          "nullable": true
        },
        {
          "name": "username",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "avatar_url",
          "type": "text",
          "nullable": true
        },
        {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "token_version",
          "type": "integer",
          "nullable": false,
          "default": "1"
        }
      ],
      "indexes": [
        {
          "name": "users_pkey",
          "def": "CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)",
          "table": "public.users",
          "columns": ["id"]
        },
        {
          "name": "idx_users_email",
          "def": "CREATE UNIQUE INDEX idx_users_email ON public.users USING btree (email) WHERE (email IS NOT NULL)",
          "table": "public.users",
          "columns": ["email"]
        },
        {
          "name": "idx_users_username",
          "def": "CREATE INDEX idx_users_username ON public.users USING btree (username)",
          "table": "public.users",
          "columns": ["username"]
        }
      ],
      "constraints": [
        {
          "name": "users_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.users",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.oauth_accounts",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "provider",
          "type": "oauth_provider",
          "nullable": false
        },
        {
          "name": "provider_user_id",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "provider_username",
          "type": "varchar(255)",
          "nullable": true
        },
        {
          "name": "access_token",
          "type": "text",
          "nullable": true
        },
        {
          "name": "scope",
          "type": "varchar(500)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "oauth_accounts_pkey",
          "def": "CREATE UNIQUE INDEX oauth_accounts_pkey ON public.oauth_accounts USING btree (id)",
          "table": "public.oauth_accounts",
          "columns": ["id"]
        },
        {
          "name": "uq_oauth_provider_user",
          "def": "CREATE UNIQUE INDEX uq_oauth_provider_user ON public.oauth_accounts USING btree (provider, provider_user_id)",
          "table": "public.oauth_accounts",
          "columns": ["provider", "provider_user_id"]
        },
        {
          "name": "idx_oauth_accounts_user_id",
          "def": "CREATE INDEX idx_oauth_accounts_user_id ON public.oauth_accounts USING btree (user_id)",
          "table": "public.oauth_accounts",
          "columns": ["user_id"]
        },
        {
          "name": "idx_oauth_accounts_user_provider",
          "def": "CREATE INDEX idx_oauth_accounts_user_provider ON public.oauth_accounts USING btree (user_id, provider)",
          "table": "public.oauth_accounts",
          "columns": ["user_id", "provider"]
        }
      ],
      "constraints": [
        {
          "name": "fk_oauth_accounts_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.oauth_accounts",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "oauth_accounts_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.oauth_accounts",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_oauth_provider_user",
          "type": "UNIQUE",
          "def": "UNIQUE (provider, provider_user_id)",
          "table": "public.oauth_accounts",
          "referenced_table": "",
          "columns": ["provider", "provider_user_id"]
        }
      ]
    },
    {
      "name": "public.user_bookmarks",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "codebase_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        }
      ],
      "indexes": [
        {
          "name": "idx_user_bookmarks_user",
          "def": "CREATE INDEX idx_user_bookmarks_user ON public.user_bookmarks USING btree (user_id, created_at)",
          "table": "public.user_bookmarks",
          "columns": ["user_id", "created_at"]
        },
        {
          "name": "user_bookmarks_pkey",
          "def": "CREATE UNIQUE INDEX user_bookmarks_pkey ON public.user_bookmarks USING btree (id)",
          "table": "public.user_bookmarks",
          "columns": ["id"]
        },
        {
          "name": "uq_user_bookmarks_user_codebase",
          "def": "CREATE UNIQUE INDEX uq_user_bookmarks_user_codebase ON public.user_bookmarks USING btree (user_id, codebase_id)",
          "table": "public.user_bookmarks",
          "columns": ["user_id", "codebase_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_user_bookmarks_codebase",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (codebase_id) REFERENCES codebases(id) ON DELETE CASCADE",
          "table": "public.user_bookmarks",
          "referenced_table": "codebases",
          "columns": ["codebase_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_bookmarks_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_bookmarks",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_bookmarks_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_bookmarks",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_user_bookmarks_user_codebase",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, codebase_id)",
          "table": "public.user_bookmarks",
          "referenced_table": "",
          "columns": ["user_id", "codebase_id"]
        }
      ]
    },
    {
      "name": "public.user_analysis_history",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "analysis_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "retention_days_at_creation",
          "type": "integer",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "idx_user_analysis_history_analysis",
          "def": "CREATE INDEX idx_user_analysis_history_analysis ON public.user_analysis_history USING btree (analysis_id)",
          "table": "public.user_analysis_history",
          "columns": ["analysis_id"]
        },
        {
          "name": "user_analysis_history_pkey",
          "def": "CREATE UNIQUE INDEX user_analysis_history_pkey ON public.user_analysis_history USING btree (id)",
          "table": "public.user_analysis_history",
          "columns": ["id"]
        },
        {
          "name": "uq_user_analysis_history_user_analysis",
          "def": "CREATE UNIQUE INDEX uq_user_analysis_history_user_analysis ON public.user_analysis_history USING btree (user_id, analysis_id)",
          "table": "public.user_analysis_history",
          "columns": ["user_id", "analysis_id"]
        },
        {
          "name": "idx_user_analysis_history_cursor",
          "def": "CREATE INDEX idx_user_analysis_history_cursor ON public.user_analysis_history USING btree (user_id, updated_at, id)",
          "table": "public.user_analysis_history",
          "columns": ["user_id", "updated_at", "id"]
        },
        {
          "name": "idx_user_analysis_history_retention_cleanup",
          "def": "CREATE INDEX idx_user_analysis_history_retention_cleanup ON public.user_analysis_history USING btree (created_at) WHERE (retention_days_at_creation IS NOT NULL)",
          "table": "public.user_analysis_history",
          "columns": ["created_at"]
        }
      ],
      "constraints": [
        {
          "name": "chk_retention_days_positive",
          "type": "CHECK",
          "def": "CHECK (((retention_days_at_creation IS NULL) OR (retention_days_at_creation \u003e 0)))",
          "table": "public.user_analysis_history",
          "referenced_table": "",
          "columns": ["retention_days_at_creation"]
        },
        {
          "name": "fk_user_analysis_history_analysis",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE",
          "table": "public.user_analysis_history",
          "referenced_table": "analyses",
          "columns": ["analysis_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_analysis_history_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_analysis_history",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_analysis_history_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_analysis_history",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_user_analysis_history_user_analysis",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, analysis_id)",
          "table": "public.user_analysis_history",
          "referenced_table": "",
          "columns": ["user_id", "analysis_id"]
        }
      ]
    },
    {
      "name": "public.github_organizations",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "github_org_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "login",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "avatar_url",
          "type": "text",
          "nullable": true
        },
        {
          "name": "html_url",
          "type": "text",
          "nullable": true
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "github_organizations_pkey",
          "def": "CREATE UNIQUE INDEX github_organizations_pkey ON public.github_organizations USING btree (id)",
          "table": "public.github_organizations",
          "columns": ["id"]
        },
        {
          "name": "uq_github_organizations_github_org_id",
          "def": "CREATE UNIQUE INDEX uq_github_organizations_github_org_id ON public.github_organizations USING btree (github_org_id)",
          "table": "public.github_organizations",
          "columns": ["github_org_id"]
        },
        {
          "name": "idx_github_organizations_login",
          "def": "CREATE INDEX idx_github_organizations_login ON public.github_organizations USING btree (login)",
          "table": "public.github_organizations",
          "columns": ["login"]
        }
      ],
      "constraints": [
        {
          "name": "github_organizations_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.github_organizations",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_github_organizations_github_org_id",
          "type": "UNIQUE",
          "def": "UNIQUE (github_org_id)",
          "table": "public.github_organizations",
          "referenced_table": "",
          "columns": ["github_org_id"]
        }
      ]
    },
    {
      "name": "public.user_github_org_memberships",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "org_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "role",
          "type": "varchar(50)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "user_github_org_memberships_pkey",
          "def": "CREATE UNIQUE INDEX user_github_org_memberships_pkey ON public.user_github_org_memberships USING btree (id)",
          "table": "public.user_github_org_memberships",
          "columns": ["id"]
        },
        {
          "name": "uq_user_github_org_memberships_user_org",
          "def": "CREATE UNIQUE INDEX uq_user_github_org_memberships_user_org ON public.user_github_org_memberships USING btree (user_id, org_id)",
          "table": "public.user_github_org_memberships",
          "columns": ["user_id", "org_id"]
        },
        {
          "name": "idx_user_github_org_memberships_org",
          "def": "CREATE INDEX idx_user_github_org_memberships_org ON public.user_github_org_memberships USING btree (org_id)",
          "table": "public.user_github_org_memberships",
          "columns": ["org_id"]
        },
        {
          "name": "idx_user_github_org_memberships_user",
          "def": "CREATE INDEX idx_user_github_org_memberships_user ON public.user_github_org_memberships USING btree (user_id)",
          "table": "public.user_github_org_memberships",
          "columns": ["user_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_user_github_org_memberships_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_github_org_memberships",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_github_org_memberships_org",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (org_id) REFERENCES github_organizations(id) ON DELETE CASCADE",
          "table": "public.user_github_org_memberships",
          "referenced_table": "github_organizations",
          "columns": ["org_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_github_org_memberships_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_github_org_memberships",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_user_github_org_memberships_user_org",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, org_id)",
          "table": "public.user_github_org_memberships",
          "referenced_table": "",
          "columns": ["user_id", "org_id"]
        }
      ]
    },
    {
      "name": "public.user_github_repositories",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "github_repo_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "full_name",
          "type": "varchar(500)",
          "nullable": false
        },
        {
          "name": "html_url",
          "type": "text",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "default_branch",
          "type": "varchar(100)",
          "nullable": true
        },
        {
          "name": "language",
          "type": "varchar(50)",
          "nullable": true
        },
        {
          "name": "visibility",
          "type": "varchar(20)",
          "nullable": false,
          "default": "'public'::character varying"
        },
        {
          "name": "is_private",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        },
        {
          "name": "archived",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        },
        {
          "name": "disabled",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        },
        {
          "name": "fork",
          "type": "boolean",
          "nullable": false,
          "default": "false"
        },
        {
          "name": "stargazers_count",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "pushed_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "source_type",
          "type": "varchar(20)",
          "nullable": false,
          "default": "'personal'::character varying"
        },
        {
          "name": "org_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "user_github_repositories_pkey",
          "def": "CREATE UNIQUE INDEX user_github_repositories_pkey ON public.user_github_repositories USING btree (id)",
          "table": "public.user_github_repositories",
          "columns": ["id"]
        },
        {
          "name": "uq_user_github_repositories_user_repo",
          "def": "CREATE UNIQUE INDEX uq_user_github_repositories_user_repo ON public.user_github_repositories USING btree (user_id, github_repo_id)",
          "table": "public.user_github_repositories",
          "columns": ["user_id", "github_repo_id"]
        },
        {
          "name": "idx_user_github_repositories_language",
          "def": "CREATE INDEX idx_user_github_repositories_language ON public.user_github_repositories USING btree (user_id, language) WHERE (language IS NOT NULL)",
          "table": "public.user_github_repositories",
          "columns": ["user_id", "language"]
        },
        {
          "name": "idx_user_github_repositories_org",
          "def": "CREATE INDEX idx_user_github_repositories_org ON public.user_github_repositories USING btree (user_id, org_id) WHERE (org_id IS NOT NULL)",
          "table": "public.user_github_repositories",
          "columns": ["user_id", "org_id"]
        },
        {
          "name": "idx_user_github_repositories_source",
          "def": "CREATE INDEX idx_user_github_repositories_source ON public.user_github_repositories USING btree (user_id, source_type)",
          "table": "public.user_github_repositories",
          "columns": ["user_id", "source_type"]
        },
        {
          "name": "idx_user_github_repositories_user",
          "def": "CREATE INDEX idx_user_github_repositories_user ON public.user_github_repositories USING btree (user_id, updated_at)",
          "table": "public.user_github_repositories",
          "columns": ["user_id", "updated_at"]
        }
      ],
      "constraints": [
        {
          "name": "fk_user_github_repositories_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_github_repositories",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_github_repositories_org",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (org_id) REFERENCES github_organizations(id) ON DELETE CASCADE",
          "table": "public.user_github_repositories",
          "referenced_table": "github_organizations",
          "columns": ["org_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_github_repositories_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_github_repositories",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_user_github_repositories_user_repo",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, github_repo_id)",
          "table": "public.user_github_repositories",
          "referenced_table": "",
          "columns": ["user_id", "github_repo_id"]
        }
      ]
    },
    {
      "name": "public.github_app_installations",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "installation_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "account_type",
          "type": "github_account_type",
          "nullable": false
        },
        {
          "name": "account_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "account_login",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "account_avatar_url",
          "type": "text",
          "nullable": true
        },
        {
          "name": "installer_user_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "suspended_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "github_app_installations_pkey",
          "def": "CREATE UNIQUE INDEX github_app_installations_pkey ON public.github_app_installations USING btree (id)",
          "table": "public.github_app_installations",
          "columns": ["id"]
        },
        {
          "name": "uq_github_app_installations_account",
          "def": "CREATE UNIQUE INDEX uq_github_app_installations_account ON public.github_app_installations USING btree (account_type, account_id)",
          "table": "public.github_app_installations",
          "columns": ["account_type", "account_id"]
        },
        {
          "name": "uq_github_app_installations_installation_id",
          "def": "CREATE UNIQUE INDEX uq_github_app_installations_installation_id ON public.github_app_installations USING btree (installation_id)",
          "table": "public.github_app_installations",
          "columns": ["installation_id"]
        },
        {
          "name": "idx_github_app_installations_installer",
          "def": "CREATE INDEX idx_github_app_installations_installer ON public.github_app_installations USING btree (installer_user_id) WHERE (installer_user_id IS NOT NULL)",
          "table": "public.github_app_installations",
          "columns": ["installer_user_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_github_app_installations_installer",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (installer_user_id) REFERENCES users(id) ON DELETE SET NULL",
          "table": "public.github_app_installations",
          "referenced_table": "users",
          "columns": ["installer_user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "github_app_installations_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.github_app_installations",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_github_app_installations_account",
          "type": "UNIQUE",
          "def": "UNIQUE (account_type, account_id)",
          "table": "public.github_app_installations",
          "referenced_table": "",
          "columns": ["account_type", "account_id"]
        },
        {
          "name": "uq_github_app_installations_installation_id",
          "type": "UNIQUE",
          "def": "UNIQUE (installation_id)",
          "table": "public.github_app_installations",
          "referenced_table": "",
          "columns": ["installation_id"]
        }
      ]
    },
    {
      "name": "public.refresh_tokens",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "token_hash",
          "type": "text",
          "nullable": false
        },
        {
          "name": "family_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "replaces",
          "type": "uuid",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "refresh_tokens_pkey",
          "def": "CREATE UNIQUE INDEX refresh_tokens_pkey ON public.refresh_tokens USING btree (id)",
          "table": "public.refresh_tokens",
          "columns": ["id"]
        },
        {
          "name": "uq_refresh_tokens_hash",
          "def": "CREATE UNIQUE INDEX uq_refresh_tokens_hash ON public.refresh_tokens USING btree (token_hash)",
          "table": "public.refresh_tokens",
          "columns": ["token_hash"]
        },
        {
          "name": "idx_refresh_tokens_expires",
          "def": "CREATE INDEX idx_refresh_tokens_expires ON public.refresh_tokens USING btree (expires_at) WHERE (revoked_at IS NULL)",
          "table": "public.refresh_tokens",
          "columns": ["expires_at"]
        },
        {
          "name": "idx_refresh_tokens_family_active",
          "def": "CREATE INDEX idx_refresh_tokens_family_active ON public.refresh_tokens USING btree (family_id, created_at) WHERE (revoked_at IS NULL)",
          "table": "public.refresh_tokens",
          "columns": ["family_id", "created_at"]
        },
        {
          "name": "idx_refresh_tokens_user",
          "def": "CREATE INDEX idx_refresh_tokens_user ON public.refresh_tokens USING btree (user_id)",
          "table": "public.refresh_tokens",
          "columns": ["user_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_refresh_tokens_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.refresh_tokens",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_refresh_tokens_replaces",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (replaces) REFERENCES refresh_tokens(id) ON DELETE SET NULL",
          "table": "public.refresh_tokens",
          "referenced_table": "refresh_tokens",
          "columns": ["replaces"],
          "referenced_columns": ["id"]
        },
        {
          "name": "refresh_tokens_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.refresh_tokens",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_refresh_tokens_hash",
          "type": "UNIQUE",
          "def": "UNIQUE (token_hash)",
          "table": "public.refresh_tokens",
          "referenced_table": "",
          "columns": ["token_hash"]
        }
      ]
    },
    {
      "name": "public.test_files",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "analysis_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "file_path",
          "type": "varchar(1000)",
          "nullable": false
        },
        {
          "name": "framework",
          "type": "varchar(50)",
          "nullable": true
        },
        {
          "name": "domain_hints",
          "type": "jsonb",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "test_files_pkey",
          "def": "CREATE UNIQUE INDEX test_files_pkey ON public.test_files USING btree (id)",
          "table": "public.test_files",
          "columns": ["id"]
        },
        {
          "name": "uq_test_files_analysis_path",
          "def": "CREATE UNIQUE INDEX uq_test_files_analysis_path ON public.test_files USING btree (analysis_id, file_path)",
          "table": "public.test_files",
          "columns": ["analysis_id", "file_path"]
        },
        {
          "name": "idx_test_files_analysis",
          "def": "CREATE INDEX idx_test_files_analysis ON public.test_files USING btree (analysis_id)",
          "table": "public.test_files",
          "columns": ["analysis_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_test_files_analysis",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE",
          "table": "public.test_files",
          "referenced_table": "analyses",
          "columns": ["analysis_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "test_files_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.test_files",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_test_files_analysis_path",
          "type": "UNIQUE",
          "def": "UNIQUE (analysis_id, file_path)",
          "table": "public.test_files",
          "referenced_table": "",
          "columns": ["analysis_id", "file_path"]
        }
      ]
    },
    {
      "name": "public.system_config",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "key",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "value",
          "type": "text",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "system_config_pkey",
          "def": "CREATE UNIQUE INDEX system_config_pkey ON public.system_config USING btree (key)",
          "table": "public.system_config",
          "columns": ["key"]
        }
      ],
      "constraints": [
        {
          "name": "system_config_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (key)",
          "table": "public.system_config",
          "referenced_table": "",
          "columns": ["key"]
        }
      ]
    },
    {
      "name": "public.spec_documents",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "analysis_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "content_hash",
          "type": "bytea",
          "nullable": false
        },
        {
          "name": "language",
          "type": "varchar(10)",
          "nullable": false,
          "default": "'en'::character varying"
        },
        {
          "name": "executive_summary",
          "type": "text",
          "nullable": true
        },
        {
          "name": "model_id",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "version",
          "type": "integer",
          "nullable": false,
          "default": "1"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "retention_days_at_creation",
          "type": "integer",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "spec_documents_pkey",
          "def": "CREATE UNIQUE INDEX spec_documents_pkey ON public.spec_documents USING btree (id)",
          "table": "public.spec_documents",
          "columns": ["id"]
        },
        {
          "name": "idx_spec_documents_analysis",
          "def": "CREATE INDEX idx_spec_documents_analysis ON public.spec_documents USING btree (analysis_id)",
          "table": "public.spec_documents",
          "columns": ["analysis_id"]
        },
        {
          "name": "uq_spec_documents_user_analysis_lang_version",
          "def": "CREATE UNIQUE INDEX uq_spec_documents_user_analysis_lang_version ON public.spec_documents USING btree (user_id, analysis_id, language, version)",
          "table": "public.spec_documents",
          "columns": ["user_id", "analysis_id", "language", "version"]
        },
        {
          "name": "uq_spec_documents_user_hash_lang_model_version",
          "def": "CREATE UNIQUE INDEX uq_spec_documents_user_hash_lang_model_version ON public.spec_documents USING btree (user_id, content_hash, language, model_id, version)",
          "table": "public.spec_documents",
          "columns": ["user_id", "content_hash", "language", "model_id", "version"]
        },
        {
          "name": "idx_spec_documents_user_created",
          "def": "CREATE INDEX idx_spec_documents_user_created ON public.spec_documents USING btree (user_id, created_at)",
          "table": "public.spec_documents",
          "columns": ["user_id", "created_at"]
        },
        {
          "name": "idx_spec_documents_content_hash_lang_model",
          "def": "CREATE INDEX idx_spec_documents_content_hash_lang_model ON public.spec_documents USING btree (content_hash, language, model_id)",
          "table": "public.spec_documents",
          "columns": ["content_hash", "language", "model_id"]
        },
        {
          "name": "idx_spec_documents_retention_cleanup",
          "def": "CREATE INDEX idx_spec_documents_retention_cleanup ON public.spec_documents USING btree (created_at) WHERE (retention_days_at_creation IS NOT NULL)",
          "table": "public.spec_documents",
          "columns": ["created_at"]
        }
      ],
      "constraints": [
        {
          "name": "chk_retention_days_positive",
          "type": "CHECK",
          "def": "CHECK (((retention_days_at_creation IS NULL) OR (retention_days_at_creation \u003e 0)))",
          "table": "public.spec_documents",
          "referenced_table": "",
          "columns": ["retention_days_at_creation"]
        },
        {
          "name": "fk_spec_documents_analysis",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE",
          "table": "public.spec_documents",
          "referenced_table": "analyses",
          "columns": ["analysis_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_spec_documents_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.spec_documents",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "spec_documents_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.spec_documents",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_spec_documents_user_analysis_lang_version",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, analysis_id, language, version)",
          "table": "public.spec_documents",
          "referenced_table": "",
          "columns": ["user_id", "analysis_id", "language", "version"]
        },
        {
          "name": "uq_spec_documents_user_hash_lang_model_version",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, content_hash, language, model_id, version)",
          "table": "public.spec_documents",
          "referenced_table": "",
          "columns": ["user_id", "content_hash", "language", "model_id", "version"]
        }
      ]
    },
    {
      "name": "public.spec_domains",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "document_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "sort_order",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "classification_confidence",
          "type": "numeric(3,2)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "spec_domains_pkey",
          "def": "CREATE UNIQUE INDEX spec_domains_pkey ON public.spec_domains USING btree (id)",
          "table": "public.spec_domains",
          "columns": ["id"]
        },
        {
          "name": "idx_spec_domains_document_sort",
          "def": "CREATE INDEX idx_spec_domains_document_sort ON public.spec_domains USING btree (document_id, sort_order)",
          "table": "public.spec_domains",
          "columns": ["document_id", "sort_order"]
        }
      ],
      "constraints": [
        {
          "name": "fk_spec_domains_document",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE CASCADE",
          "table": "public.spec_domains",
          "referenced_table": "spec_documents",
          "columns": ["document_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "spec_domains_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.spec_domains",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.spec_features",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "domain_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "sort_order",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "spec_features_pkey",
          "def": "CREATE UNIQUE INDEX spec_features_pkey ON public.spec_features USING btree (id)",
          "table": "public.spec_features",
          "columns": ["id"]
        },
        {
          "name": "idx_spec_features_domain_sort",
          "def": "CREATE INDEX idx_spec_features_domain_sort ON public.spec_features USING btree (domain_id, sort_order)",
          "table": "public.spec_features",
          "columns": ["domain_id", "sort_order"]
        }
      ],
      "constraints": [
        {
          "name": "fk_spec_features_domain",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (domain_id) REFERENCES spec_domains(id) ON DELETE CASCADE",
          "table": "public.spec_features",
          "referenced_table": "spec_domains",
          "columns": ["domain_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "spec_features_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.spec_features",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.spec_behaviors",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "feature_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "source_test_case_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "original_name",
          "type": "varchar(2000)",
          "nullable": false
        },
        {
          "name": "converted_description",
          "type": "text",
          "nullable": false
        },
        {
          "name": "sort_order",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "spec_behaviors_pkey",
          "def": "CREATE UNIQUE INDEX spec_behaviors_pkey ON public.spec_behaviors USING btree (id)",
          "table": "public.spec_behaviors",
          "columns": ["id"]
        },
        {
          "name": "idx_spec_behaviors_feature_sort",
          "def": "CREATE INDEX idx_spec_behaviors_feature_sort ON public.spec_behaviors USING btree (feature_id, sort_order)",
          "table": "public.spec_behaviors",
          "columns": ["feature_id", "sort_order"]
        },
        {
          "name": "idx_spec_behaviors_source",
          "def": "CREATE INDEX idx_spec_behaviors_source ON public.spec_behaviors USING btree (source_test_case_id) WHERE (source_test_case_id IS NOT NULL)",
          "table": "public.spec_behaviors",
          "columns": ["source_test_case_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_spec_behaviors_test_case",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (source_test_case_id) REFERENCES test_cases(id) ON DELETE SET NULL",
          "table": "public.spec_behaviors",
          "referenced_table": "test_cases",
          "columns": ["source_test_case_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_spec_behaviors_feature",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (feature_id) REFERENCES spec_features(id) ON DELETE CASCADE",
          "table": "public.spec_behaviors",
          "referenced_table": "spec_features",
          "columns": ["feature_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "spec_behaviors_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.spec_behaviors",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.user_specview_history",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "document_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "user_specview_history_pkey",
          "def": "CREATE UNIQUE INDEX user_specview_history_pkey ON public.user_specview_history USING btree (id)",
          "table": "public.user_specview_history",
          "columns": ["id"]
        },
        {
          "name": "uq_user_specview_history_user_document",
          "def": "CREATE UNIQUE INDEX uq_user_specview_history_user_document ON public.user_specview_history USING btree (user_id, document_id)",
          "table": "public.user_specview_history",
          "columns": ["user_id", "document_id"]
        },
        {
          "name": "idx_user_specview_history_cursor",
          "def": "CREATE INDEX idx_user_specview_history_cursor ON public.user_specview_history USING btree (user_id, updated_at, id)",
          "table": "public.user_specview_history",
          "columns": ["user_id", "updated_at", "id"]
        },
        {
          "name": "idx_user_specview_history_document",
          "def": "CREATE INDEX idx_user_specview_history_document ON public.user_specview_history USING btree (document_id)",
          "table": "public.user_specview_history",
          "columns": ["document_id"]
        }
      ],
      "constraints": [
        {
          "name": "fk_user_specview_history_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_specview_history",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_specview_history_document",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE CASCADE",
          "table": "public.user_specview_history",
          "referenced_table": "spec_documents",
          "columns": ["document_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_specview_history_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_specview_history",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_user_specview_history_user_document",
          "type": "UNIQUE",
          "def": "UNIQUE (user_id, document_id)",
          "table": "public.user_specview_history",
          "referenced_table": "",
          "columns": ["user_id", "document_id"]
        }
      ]
    },
    {
      "name": "public.usage_events",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "event_type",
          "type": "usage_event_type",
          "nullable": false
        },
        {
          "name": "analysis_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "document_id",
          "type": "uuid",
          "nullable": true
        },
        {
          "name": "quota_amount",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "usage_events_pkey",
          "def": "CREATE UNIQUE INDEX usage_events_pkey ON public.usage_events USING btree (id)",
          "table": "public.usage_events",
          "columns": ["id"]
        },
        {
          "name": "idx_usage_events_analysis",
          "def": "CREATE INDEX idx_usage_events_analysis ON public.usage_events USING btree (analysis_id) WHERE (analysis_id IS NOT NULL)",
          "table": "public.usage_events",
          "columns": ["analysis_id"]
        },
        {
          "name": "idx_usage_events_document",
          "def": "CREATE INDEX idx_usage_events_document ON public.usage_events USING btree (document_id) WHERE (document_id IS NOT NULL)",
          "table": "public.usage_events",
          "columns": ["document_id"]
        },
        {
          "name": "idx_usage_events_quota_lookup",
          "def": "CREATE INDEX idx_usage_events_quota_lookup ON public.usage_events USING btree (user_id, event_type, created_at)",
          "table": "public.usage_events",
          "columns": ["user_id", "event_type", "created_at"]
        }
      ],
      "constraints": [
        {
          "name": "chk_usage_events_resource",
          "type": "CHECK",
          "def": "CHECK (((((analysis_id IS NOT NULL))::integer + ((document_id IS NOT NULL))::integer) = 1))",
          "table": "public.usage_events",
          "referenced_table": "",
          "columns": ["analysis_id", "document_id"]
        },
        {
          "name": "fk_usage_events_analysis",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE SET NULL",
          "table": "public.usage_events",
          "referenced_table": "analyses",
          "columns": ["analysis_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_usage_events_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.usage_events",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_usage_events_document",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE SET NULL",
          "table": "public.usage_events",
          "referenced_table": "spec_documents",
          "columns": ["document_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "usage_events_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.usage_events",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.subscription_plans",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "tier",
          "type": "plan_tier",
          "nullable": false
        },
        {
          "name": "specview_monthly_limit",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "analysis_monthly_limit",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "retention_days",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "monthly_price",
          "type": "integer",
          "nullable": true
        }
      ],
      "indexes": [
        {
          "name": "subscription_plans_pkey",
          "def": "CREATE UNIQUE INDEX subscription_plans_pkey ON public.subscription_plans USING btree (id)",
          "table": "public.subscription_plans",
          "columns": ["id"]
        },
        {
          "name": "uq_subscription_plans_tier",
          "def": "CREATE UNIQUE INDEX uq_subscription_plans_tier ON public.subscription_plans USING btree (tier)",
          "table": "public.subscription_plans",
          "columns": ["tier"]
        }
      ],
      "constraints": [
        {
          "name": "subscription_plans_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.subscription_plans",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_subscription_plans_tier",
          "type": "UNIQUE",
          "def": "UNIQUE (tier)",
          "table": "public.subscription_plans",
          "referenced_table": "",
          "columns": ["tier"]
        }
      ]
    },
    {
      "name": "public.user_subscriptions",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "plan_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "status",
          "type": "subscription_status",
          "nullable": false,
          "default": "'active'::subscription_status"
        },
        {
          "name": "current_period_start",
          "type": "timestamp with time zone",
          "nullable": false
        },
        {
          "name": "current_period_end",
          "type": "timestamp with time zone",
          "nullable": false
        },
        {
          "name": "canceled_at",
          "type": "timestamp with time zone",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "user_subscriptions_pkey",
          "def": "CREATE UNIQUE INDEX user_subscriptions_pkey ON public.user_subscriptions USING btree (id)",
          "table": "public.user_subscriptions",
          "columns": ["id"]
        },
        {
          "name": "idx_user_subscriptions_active",
          "def": "CREATE UNIQUE INDEX idx_user_subscriptions_active ON public.user_subscriptions USING btree (user_id) WHERE (status = 'active'::subscription_status)",
          "table": "public.user_subscriptions",
          "columns": ["user_id"]
        },
        {
          "name": "idx_user_subscriptions_period_end",
          "def": "CREATE INDEX idx_user_subscriptions_period_end ON public.user_subscriptions USING btree (current_period_end) WHERE (status = 'active'::subscription_status)",
          "table": "public.user_subscriptions",
          "columns": ["current_period_end"]
        },
        {
          "name": "idx_user_subscriptions_plan",
          "def": "CREATE INDEX idx_user_subscriptions_plan ON public.user_subscriptions USING btree (plan_id)",
          "table": "public.user_subscriptions",
          "columns": ["plan_id"]
        }
      ],
      "constraints": [
        {
          "name": "chk_canceled_at_status",
          "type": "CHECK",
          "def": "CHECK (((status = 'canceled'::subscription_status) = (canceled_at IS NOT NULL)))",
          "table": "public.user_subscriptions",
          "referenced_table": "",
          "columns": ["status", "canceled_at"]
        },
        {
          "name": "fk_user_subscriptions_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.user_subscriptions",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "fk_user_subscriptions_plan",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (plan_id) REFERENCES subscription_plans(id) ON DELETE RESTRICT",
          "table": "public.user_subscriptions",
          "referenced_table": "subscription_plans",
          "columns": ["plan_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "user_subscriptions_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.user_subscriptions",
          "referenced_table": "",
          "columns": ["id"]
        }
      ]
    },
    {
      "name": "public.behavior_caches",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "cache_key_hash",
          "type": "bytea",
          "nullable": false
        },
        {
          "name": "converted_description",
          "type": "text",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "behavior_caches_pkey",
          "def": "CREATE UNIQUE INDEX behavior_caches_pkey ON public.behavior_caches USING btree (id)",
          "table": "public.behavior_caches",
          "columns": ["id"]
        },
        {
          "name": "uq_behavior_caches_key",
          "def": "CREATE UNIQUE INDEX uq_behavior_caches_key ON public.behavior_caches USING btree (cache_key_hash)",
          "table": "public.behavior_caches",
          "columns": ["cache_key_hash"]
        },
        {
          "name": "idx_behavior_caches_created_at",
          "def": "CREATE INDEX idx_behavior_caches_created_at ON public.behavior_caches USING btree (created_at)",
          "table": "public.behavior_caches",
          "columns": ["created_at"]
        }
      ],
      "constraints": [
        {
          "name": "behavior_caches_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.behavior_caches",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_behavior_caches_key",
          "type": "UNIQUE",
          "def": "UNIQUE (cache_key_hash)",
          "table": "public.behavior_caches",
          "referenced_table": "",
          "columns": ["cache_key_hash"]
        }
      ]
    },
    {
      "name": "public.classification_caches",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "content_hash",
          "type": "bytea",
          "nullable": false
        },
        {
          "name": "language",
          "type": "varchar(10)",
          "nullable": false
        },
        {
          "name": "model_id",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "phase1_output",
          "type": "jsonb",
          "nullable": false
        },
        {
          "name": "test_index_map",
          "type": "jsonb",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "classification_caches_pkey",
          "def": "CREATE UNIQUE INDEX classification_caches_pkey ON public.classification_caches USING btree (id)",
          "table": "public.classification_caches",
          "columns": ["id"]
        },
        {
          "name": "uq_classification_caches_key",
          "def": "CREATE UNIQUE INDEX uq_classification_caches_key ON public.classification_caches USING btree (content_hash, language, model_id)",
          "table": "public.classification_caches",
          "columns": ["content_hash", "language", "model_id"]
        },
        {
          "name": "idx_classification_caches_created_at",
          "def": "CREATE INDEX idx_classification_caches_created_at ON public.classification_caches USING btree (created_at)",
          "table": "public.classification_caches",
          "columns": ["created_at"]
        }
      ],
      "constraints": [
        {
          "name": "classification_caches_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.classification_caches",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_classification_caches_key",
          "type": "UNIQUE",
          "def": "UNIQUE (content_hash, language, model_id)",
          "table": "public.classification_caches",
          "referenced_table": "",
          "columns": ["content_hash", "language", "model_id"]
        }
      ]
    },
    {
      "name": "public.quota_reservations",
      "type": "BASE TABLE",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()"
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "event_type",
          "type": "usage_event_type",
          "nullable": false
        },
        {
          "name": "reserved_amount",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "job_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "(now() + '01:00:00'::interval)"
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()"
        }
      ],
      "indexes": [
        {
          "name": "quota_reservations_pkey",
          "def": "CREATE UNIQUE INDEX quota_reservations_pkey ON public.quota_reservations USING btree (id)",
          "table": "public.quota_reservations",
          "columns": ["id"]
        },
        {
          "name": "uq_quota_reservations_job_id",
          "def": "CREATE UNIQUE INDEX uq_quota_reservations_job_id ON public.quota_reservations USING btree (job_id)",
          "table": "public.quota_reservations",
          "columns": ["job_id"]
        },
        {
          "name": "idx_quota_reservations_expires",
          "def": "CREATE INDEX idx_quota_reservations_expires ON public.quota_reservations USING btree (expires_at)",
          "table": "public.quota_reservations",
          "columns": ["expires_at"]
        },
        {
          "name": "idx_quota_reservations_user_event",
          "def": "CREATE INDEX idx_quota_reservations_user_event ON public.quota_reservations USING btree (user_id, event_type)",
          "table": "public.quota_reservations",
          "columns": ["user_id", "event_type"]
        }
      ],
      "constraints": [
        {
          "name": "chk_reserved_amount_positive",
          "type": "CHECK",
          "def": "CHECK ((reserved_amount \u003e 0))",
          "table": "public.quota_reservations",
          "referenced_table": "",
          "columns": ["reserved_amount"]
        },
        {
          "name": "fk_quota_reservations_user",
          "type": "FOREIGN KEY",
          "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "table": "public.quota_reservations",
          "referenced_table": "users",
          "columns": ["user_id"],
          "referenced_columns": ["id"]
        },
        {
          "name": "quota_reservations_pkey",
          "type": "PRIMARY KEY",
          "def": "PRIMARY KEY (id)",
          "table": "public.quota_reservations",
          "referenced_table": "",
          "columns": ["id"]
        },
        {
          "name": "uq_quota_reservations_job_id",
          "type": "UNIQUE",
          "def": "UNIQUE (job_id)",
          "table": "public.quota_reservations",
          "referenced_table": "",
          "columns": ["job_id"]
        }
      ]
    }
  ],
  "relations": [
    {
      "table": "public.analyses",
      "columns": ["codebase_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.codebases",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (codebase_id) REFERENCES codebases(id) ON DELETE CASCADE"
    },
    {
      "table": "public.test_suites",
      "columns": ["parent_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.test_suites",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (parent_id) REFERENCES test_suites(id) ON DELETE CASCADE"
    },
    {
      "table": "public.test_suites",
      "columns": ["file_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.test_files",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (file_id) REFERENCES test_files(id) ON DELETE CASCADE"
    },
    {
      "table": "public.test_cases",
      "columns": ["suite_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.test_suites",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (suite_id) REFERENCES test_suites(id) ON DELETE CASCADE"
    },
    {
      "table": "public.oauth_accounts",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_bookmarks",
      "columns": ["codebase_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.codebases",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (codebase_id) REFERENCES codebases(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_bookmarks",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_analysis_history",
      "columns": ["analysis_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.analyses",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_analysis_history",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_github_org_memberships",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_github_org_memberships",
      "columns": ["org_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.github_organizations",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (org_id) REFERENCES github_organizations(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_github_repositories",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_github_repositories",
      "columns": ["org_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.github_organizations",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (org_id) REFERENCES github_organizations(id) ON DELETE CASCADE"
    },
    {
      "table": "public.github_app_installations",
      "columns": ["installer_user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (installer_user_id) REFERENCES users(id) ON DELETE SET NULL"
    },
    {
      "table": "public.refresh_tokens",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.refresh_tokens",
      "columns": ["replaces"],
      "cardinality": "zero_or_more",
      "parent_table": "public.refresh_tokens",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (replaces) REFERENCES refresh_tokens(id) ON DELETE SET NULL"
    },
    {
      "table": "public.test_files",
      "columns": ["analysis_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.analyses",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE"
    },
    {
      "table": "public.spec_documents",
      "columns": ["analysis_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.analyses",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE CASCADE"
    },
    {
      "table": "public.spec_documents",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.spec_domains",
      "columns": ["document_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.spec_documents",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE CASCADE"
    },
    {
      "table": "public.spec_features",
      "columns": ["domain_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.spec_domains",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (domain_id) REFERENCES spec_domains(id) ON DELETE CASCADE"
    },
    {
      "table": "public.spec_behaviors",
      "columns": ["source_test_case_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.test_cases",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (source_test_case_id) REFERENCES test_cases(id) ON DELETE SET NULL"
    },
    {
      "table": "public.spec_behaviors",
      "columns": ["feature_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.spec_features",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (feature_id) REFERENCES spec_features(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_specview_history",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_specview_history",
      "columns": ["document_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.spec_documents",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE CASCADE"
    },
    {
      "table": "public.usage_events",
      "columns": ["analysis_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.analyses",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (analysis_id) REFERENCES analyses(id) ON DELETE SET NULL"
    },
    {
      "table": "public.usage_events",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.usage_events",
      "columns": ["document_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.spec_documents",
      "parent_columns": ["id"],
      "parent_cardinality": "zero_or_one",
      "def": "FOREIGN KEY (document_id) REFERENCES spec_documents(id) ON DELETE SET NULL"
    },
    {
      "table": "public.user_subscriptions",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    },
    {
      "table": "public.user_subscriptions",
      "columns": ["plan_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.subscription_plans",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (plan_id) REFERENCES subscription_plans(id) ON DELETE RESTRICT"
    },
    {
      "table": "public.quota_reservations",
      "columns": ["user_id"],
      "cardinality": "zero_or_more",
      "parent_table": "public.users",
      "parent_columns": ["id"],
      "parent_cardinality": "exactly_one",
      "def": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
    }
  ],
  "enums": [
    {
      "name": "public.analysis_status",
      "values": ["completed", "failed", "pending", "running"]
    },
    {
      "name": "public.github_account_type",
      "values": ["organization", "user"]
    },
    {
      "name": "public.oauth_provider",
      "values": ["github"]
    },
    {
      "name": "public.plan_tier",
      "values": ["enterprise", "free", "pro", "pro_plus"]
    },
    {
      "name": "public.river_job_state",
      "values": [
        "available",
        "cancelled",
        "completed",
        "discarded",
        "pending",
        "retryable",
        "running",
        "scheduled"
      ]
    },
    {
      "name": "public.subscription_status",
      "values": ["active", "canceled", "expired"]
    },
    {
      "name": "public.test_status",
      "values": ["active", "focused", "skipped", "todo", "xfail"]
    },
    {
      "name": "public.usage_event_type",
      "values": ["analysis", "specview"]
    }
  ],
  "driver": {
    "name": "postgres",
    "database_version": "PostgreSQL 17.7 (Debian 17.7-3.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit",
    "meta": {
      "current_schema": "public",
      "search_paths": ["postgres", "public"],
      "dict": {
        "Functions": "Stored procedures and functions"
      }
    }
  }
}
